var myvne_plugins={API3_IS_READ:0,html_load:'<a href="javascript:void(0);" class="circle_s flexbox luutin"><div class="lds-hourglass"></div></a>',html_no_save:'<a href="javascript:void(0);" class="save"><svg class="ic ic-save-outline"><use xlink:href="#Save-1"></use></svg>L\u01b0u</a>',html_save:'<a href="javascript:void(0);" class="save active"><svg class="ic ic-save-outline"><use xlink:href="#Save"></use></svg>L\u01b0u</a>',html_no_save_social:'<a href="javascript:void(0);" class="social_save flexbox"><svg class="ic ic-save"><use xlink:href="#Save"></use></svg></a>',
html_save_social:'<a href="javascript:void(0);" class="social_save flexbox active"><svg class="ic ic-save"><use xlink:href="#Save"></use></svg></a>',html_no_save_social_v:'<a href="javascript:void(0);" class="circle_s flexbox luutin"><svg class="ic ic-save"><use xlink:href="#Save"></use></svg></a>',html_save_social_v:'<a href="javascript:void(0);" class="circle_s flexbox luutin active"><svg class="ic ic-save"><use xlink:href="#Save"></use></svg></a>',checking:0,checkingLimit:0,initButton:function(){$("head").append("<style type='text/css'>.lds-hourglass:after{content:\" \";display:block;border-radius:50%;width:0;height:0;margin:3px;box-sizing:border-box;border:12px solid #757575;border-color:#757575 #fff #757575 #fff;animation:lds-hourglass 5s infinite}@keyframes lds-hourglass{0%{transform:rotate(0);animation-timing-function:cubic-bezier(.55,.055,.675,.19)}50%{transform:rotate(900deg);animation-timing-function:cubic-bezier(.215,.61,.355,1)}100%{transform:rotate(1800deg)}}</style>");
0>document.cookie.indexOf("myvne_user_id")?($(".social_pin .myvne_save_for_later").addClass("border").html(this.html_no_save_social),$(".social-com .myvne_save_for_later, .social .myvne_save_for_later").addClass("border").html(this.html_no_save_social_v)):($(".social_pin .myvne_save_for_later").addClass("border").html(this.html_load),$(".social-com .myvne_save_for_later, .social .myvne_save_for_later").addClass("border").html(this.html_load));$(".footer-content .myvne_save_for_later").html(this.html_no_save)},
check:function(){var a=this;myvne_users.getProfileData(function(b){if("undefined"!=typeof b&&b.user_email&&0===a.checking){a.checkingLimit+=1;a.checking=1;var f=[];$(".myvne_save_for_later").each(function(a){a=$(this).attr("data-article-id").trim();0<parseInt(a)&&-1>=f.indexOf(a)&&f.push(a)});article_id=f.join(",");b.user_id&&article_id&&0==a.API3_IS_READ&&$.ajax({type:"GET",dataType:"json",data:{type:"check_user",app_id:"bd20c",user_id:b.user_id,article_id:article_id,check:"article_save"},url:"//api3.vnexpress.net/api/article",
success:function(b){$.each(f,function(f,e){var c=$('.social_pin .myvne_save_for_later[data-article-id="'+e+'"]'),g=$('.social-com .myvne_save_for_later[data-article-id="'+e+'"], .social .myvne_save_for_later[data-article-id="'+e+'"]'),d=$('.footer-content .myvne_save_for_later[data-article-id="'+e+'"]'),h=$('.box-head-tablet .myvne_save_for_later[data-article-id="'+e+'"]');0==b.error&&1==b.data.article_save[e]?(c.html(a.html_save_social),g.html(a.html_save_social_v),d.html(a.html_save),h.html(a.html_save_social_v),
c.addClass("saved"),g.addClass("saved"),d.addClass("saved"),h.addClass("saved")):(c.html(a.html_no_save_social),g.html(a.html_no_save_social_v),d.html(a.html_no_save),h.html(a.html_no_save_social_v));c.addClass("border")});a.checking=1},error:function(b,d){a.checking=0}});setTimeout(function(){a.check()},6E4)}else 5>a.checkingLimit&&(a.checkingLimit+=1,setTimeout(function(){a.check()},3E3))})},saving:0,save:function(){var a=this;a.check();$(document).on("click",".myvne_save_for_later",
function(){a.API3_IS_READ=1;var b=$(this).attr("data-article-id"),f=$(this).attr("data-token"),k=$(this);"object"==typeof myvne_users&&"function"==typeof myvne_users.authentication&&0===a.saving?(myvne_users.authentication(function(d){var e="vnexpress.net"===location.host?"vnexpress.net":location.host;if(d.user_email&&d.user_id)a.saving=1;else return myvne_users._html_popup_login(),!1;var c={};c.user_id=d.user_id;c.article_id=b;c.token_key=f;c.user_session=d.user_session;k.hasClass("saved")?(c.saveaction=
"unsave",$.ajax({type:"GET",dataType:"jsonp",data:c,url:"//"+e+"/api/myvnesubmit",success:function(c){0==c.error?($('.social_pin .myvne_save_for_later[data-article-id="'+b+'"]').removeClass("saved").html(a.html_no_save_social),$('.social-com .myvne_save_for_later[data-article-id="'+b+'"], .social .myvne_save_for_later[data-article-id="'+b+'"], .box-head-tablet .myvne_save_for_later[data-article-id="'+b+'"]').removeClass("saved").html(a.html_no_save_social_v),$('.footer-content .myvne_save_for_later[data-article-id="'+
b+'"]').removeClass("saved").html(a.html_no_save)):myvne_users._html_popup_success("B\u1ecf l\u01b0u b\u00e0i vi\u1ebft kh\u00f4ng th\u00e0nh c\u00f4ng, vui l\u00f2ng th\u1eed l\u1ea1i.");a.saving=0},error:function(b,c){myvne_users._html_popup_success("B\u1ecf l\u01b0u b\u00e0i vi\u1ebft kh\u00f4ng th\u00e0nh c\u00f4ng, vui l\u00f2ng th\u1eed l\u1ea1i.");a.saving=0}})):$.ajax({type:"GET",dataType:"jsonp",data:c,url:"//"+e+"/api/myvnesubmit",success:function(c){0==c.error?($('.social_pin .myvne_save_for_later[data-article-id="'+
b+'"]').addClass("saved").html(a.html_save_social),$('.social-com .myvne_save_for_later[data-article-id="'+b+'"], .social .myvne_save_for_later[data-article-id="'+b+'"], .box-head-tablet .myvne_save_for_later[data-article-id="'+b+'"]').addClass("saved").html(a.html_save_social_v),$('.footer-content .myvne_save_for_later[data-article-id="'+b+'"]').addClass("saved").html(a.html_save),dataLayer.push({event:"socialEvent",social_action:"save article"})):myvne_users._html_popup_success("L\u01b0u b\u00e0i vi\u1ebft kh\u00f4ng th\u00e0nh c\u00f4ng, vui l\u00f2ng th\u1eed l\u1ea1i.");
a.saving=0},error:function(b,c){myvne_users._html_popup_success("L\u01b0u b\u00e0i vi\u1ebft kh\u00f4ng th\u00e0nh c\u00f4ng, vui l\u00f2ng th\u1eed l\u1ea1i.");a.saving=0}})},"member"),setTimeout(function(){a.saving=0},1E4)):1===a.saving&&myvne_users._html_popup_success("Sau 10 gi\u00e2y b\u1ea1n m\u1edbi c\u00f3 th\u1ec3 th\u1ef1c hi\u1ec7n h\u00e0nh \u0111\u1ed9ng n\u00e0y.")})},run:function(){var a=this;a.initButton();var b=setInterval(function(){"undefined"!=typeof myvne_users&&(clearInterval(b),
a.check(),a.save())},1E3);setTimeout(function(){"undefined"==typeof b&&null==b||clearInterval(b)},6E4)}};